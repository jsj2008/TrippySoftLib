package {	import flash.display.*;	import flash.net.*;	import flash.events.*;	import flash.ui.*;		public class ViewMain extends Sprite {		public function ViewMain() {			TSLoader.load("view-tilemap.xml", loadedSettings, URLLoaderDataFormat.TEXT);		}				public function loadedSettings(data:String, url:String):void {			settings = new XML(data);			TS.initDebuggers(this);			Key.initialize(stage);						tilemap = new TSTilemap(settings.baseDir, settings.target);						backBuffer = TS.createBackBuffer(this, 1024, 768);			stage.addEventListener(Event.ENTER_FRAME, Update);		}				public var currentX:int = 0;		public var currentY:int = 0;		public var scrollSpeed:int = -25;				public function Update(e:Event):void {			if(Key.isDown(Keyboard.LEFT)) currentX -= scrollSpeed;			if(Key.isDown(Keyboard.RIGHT)) currentX += scrollSpeed;			if(Key.isDown(Keyboard.UP)) currentY -= scrollSpeed;			if(Key.isDown(Keyboard.DOWN)) currentY += scrollSpeed;						backBuffer.lock();			backBuffer.fillRect(backBuffer.rect, 0x0);			tilemap.render(backBuffer, currentX, currentY);			backBuffer.unlock();		}				public var tilemap:TSTilemap;		public var settings:XML;		public var backBuffer:BitmapData;	}}